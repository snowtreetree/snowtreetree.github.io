<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>协议 | 张雪林的个人博客</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="张雪林的个人博客-技术总结，问题归纳">
    <link rel="preload" href="/assets/css/0.styles.34d67128.css" as="style"><link rel="preload" href="/assets/js/app.46f8a346.js" as="script"><link rel="preload" href="/assets/js/2.0165f38a.js" as="script"><link rel="preload" href="/assets/js/42.546235c5.js" as="script"><link rel="prefetch" href="/assets/js/10.01f2940f.js"><link rel="prefetch" href="/assets/js/11.0e0ad10d.js"><link rel="prefetch" href="/assets/js/12.5a5910a7.js"><link rel="prefetch" href="/assets/js/13.1962f7e7.js"><link rel="prefetch" href="/assets/js/14.23a63143.js"><link rel="prefetch" href="/assets/js/15.d4fb12d8.js"><link rel="prefetch" href="/assets/js/16.b9fdcba3.js"><link rel="prefetch" href="/assets/js/17.92b2a7e3.js"><link rel="prefetch" href="/assets/js/18.9d51798d.js"><link rel="prefetch" href="/assets/js/19.b30ffeb8.js"><link rel="prefetch" href="/assets/js/20.20d3500b.js"><link rel="prefetch" href="/assets/js/21.cac6043d.js"><link rel="prefetch" href="/assets/js/22.80e8eb51.js"><link rel="prefetch" href="/assets/js/23.2e15bee8.js"><link rel="prefetch" href="/assets/js/24.784759f2.js"><link rel="prefetch" href="/assets/js/25.0ba66fd2.js"><link rel="prefetch" href="/assets/js/26.366cbaad.js"><link rel="prefetch" href="/assets/js/27.dc2c794f.js"><link rel="prefetch" href="/assets/js/28.1a94e829.js"><link rel="prefetch" href="/assets/js/29.4b050a15.js"><link rel="prefetch" href="/assets/js/3.5f3631b4.js"><link rel="prefetch" href="/assets/js/30.dd6cf00a.js"><link rel="prefetch" href="/assets/js/31.1daab8ca.js"><link rel="prefetch" href="/assets/js/32.d53039ed.js"><link rel="prefetch" href="/assets/js/33.d85a77e2.js"><link rel="prefetch" href="/assets/js/34.d101bceb.js"><link rel="prefetch" href="/assets/js/35.83bb46f5.js"><link rel="prefetch" href="/assets/js/36.985bfe48.js"><link rel="prefetch" href="/assets/js/37.02d85fc7.js"><link rel="prefetch" href="/assets/js/38.ebf5d765.js"><link rel="prefetch" href="/assets/js/39.8806f67f.js"><link rel="prefetch" href="/assets/js/4.7d5f245c.js"><link rel="prefetch" href="/assets/js/40.2871edb4.js"><link rel="prefetch" href="/assets/js/41.aec5c752.js"><link rel="prefetch" href="/assets/js/43.23303cbe.js"><link rel="prefetch" href="/assets/js/44.9eb8f3b5.js"><link rel="prefetch" href="/assets/js/45.8b505384.js"><link rel="prefetch" href="/assets/js/46.9dd3f20d.js"><link rel="prefetch" href="/assets/js/47.901942ac.js"><link rel="prefetch" href="/assets/js/48.6f3ba9eb.js"><link rel="prefetch" href="/assets/js/49.06cebceb.js"><link rel="prefetch" href="/assets/js/5.a3b3e033.js"><link rel="prefetch" href="/assets/js/50.68ff5502.js"><link rel="prefetch" href="/assets/js/51.4a595b33.js"><link rel="prefetch" href="/assets/js/52.17f86c29.js"><link rel="prefetch" href="/assets/js/53.a63f85d7.js"><link rel="prefetch" href="/assets/js/54.5a21f5aa.js"><link rel="prefetch" href="/assets/js/55.4c934552.js"><link rel="prefetch" href="/assets/js/56.5ebb3a0e.js"><link rel="prefetch" href="/assets/js/57.7580b4cf.js"><link rel="prefetch" href="/assets/js/58.39ad5619.js"><link rel="prefetch" href="/assets/js/59.8fb1fb23.js"><link rel="prefetch" href="/assets/js/6.892a1f0e.js"><link rel="prefetch" href="/assets/js/60.b95b9590.js"><link rel="prefetch" href="/assets/js/61.206f0ee9.js"><link rel="prefetch" href="/assets/js/62.1ffbc797.js"><link rel="prefetch" href="/assets/js/63.8f78b0bf.js"><link rel="prefetch" href="/assets/js/64.643ea8d5.js"><link rel="prefetch" href="/assets/js/65.1cc57b52.js"><link rel="prefetch" href="/assets/js/66.be0bb35e.js"><link rel="prefetch" href="/assets/js/67.ccfd1751.js"><link rel="prefetch" href="/assets/js/68.d264c4dc.js"><link rel="prefetch" href="/assets/js/69.ad46d222.js"><link rel="prefetch" href="/assets/js/7.37d88c6b.js"><link rel="prefetch" href="/assets/js/70.f19ad0ae.js"><link rel="prefetch" href="/assets/js/71.16f840d6.js"><link rel="prefetch" href="/assets/js/72.1e4578ec.js"><link rel="prefetch" href="/assets/js/73.db5bfe49.js"><link rel="prefetch" href="/assets/js/74.870e3ef4.js"><link rel="prefetch" href="/assets/js/75.2dfa996a.js"><link rel="prefetch" href="/assets/js/76.b8213f64.js"><link rel="prefetch" href="/assets/js/8.3e92e691.js"><link rel="prefetch" href="/assets/js/9.4c382471.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34d67128.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">张雪林的个人博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/base/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div> <a href="https://github.com/snowtreetree/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/base/" class="nav-link">
  基础
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div> <a href="https://github.com/snowtreetree/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js/script.html" class="sidebar-link">script</a></li><li><a href="/blog/js/scroll.html" class="sidebar-link">scroll相关</a></li><li><a href="/blog/js/select.html" class="sidebar-link">文本选中</a></li><li><a href="/blog/js/EventLoop.html" class="sidebar-link">EventLoop小计</a></li><li><a href="/blog/js/debounceandthrottle.html" class="sidebar-link">防抖&amp;节流</a></li><li><a href="/blog/js/module.html" class="sidebar-link">模块化</a></li><li><a href="/blog/js/promise.html" class="sidebar-link">Promise</a></li><li><a href="/blog/js/sort.html" class="sidebar-link">排序</a></li><li><a href="/blog/js/calc.html" class="sidebar-link">常见算法</a></li><li><a href="/blog/js/prototype.html" class="sidebar-link">原型&amp;原型链</a></li><li><a href="/blog/js/executionContext.html" class="sidebar-link">执行上下文、作用域</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/css/greyFilter.html" class="sidebar-link">网站变灰</a></li><li><a href="/blog/css/BFC.html" class="sidebar-link">BFC</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTTP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/http/HTTP.html" class="sidebar-link">HTTP 介绍</a></li><li><a href="/blog/http/InterconnectionModel.html" class="sidebar-link">互联网模型</a></li><li><a href="/blog/http/http2.html" class="sidebar-link">HTTP2</a></li><li><a href="/blog/http/SSL&amp;TLS.html" class="sidebar-link">SSL/TLS</a></li><li><a href="/blog/http/cache.html" class="sidebar-link">缓存</a></li><li><a href="/blog/http/localCache.html" class="sidebar-link">本地缓存</a></li><li><a href="/blog/http/attack.html" class="sidebar-link">XSS 和 CSRF</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>HTTP深入学习</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/http/protocol.html" aria-current="page" class="active sidebar-link">协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/http/protocol.html#tcp-ip" class="sidebar-link">TCP/IP</a></li><li class="sidebar-sub-header"><a href="/blog/http/protocol.html#dns" class="sidebar-link">DNS</a></li><li class="sidebar-sub-header"><a href="/blog/http/protocol.html#uri-url" class="sidebar-link">URI/URL</a></li><li class="sidebar-sub-header"><a href="/blog/http/protocol.html#https" class="sidebar-link">HTTPS</a></li><li class="sidebar-sub-header"><a href="/blog/http/protocol.html#代理" class="sidebar-link">代理</a></li><li class="sidebar-sub-header"><a href="/blog/http/protocol.html#网关（？）" class="sidebar-link">网关（？）</a></li></ul></li><li><a href="/blog/http/layer.html" class="sidebar-link">分层</a></li><li><a href="/blog/http/DomainName.html" class="sidebar-link">域名</a></li><li><a href="/blog/http/RequestResponse.html" class="sidebar-link">请求和响应</a></li><li><a href="/blog/http/methods.html" class="sidebar-link">请求方法</a></li><li><a href="/blog/http/status.html" class="sidebar-link">状态码</a></li><li><a href="/blog/http/transfer.html" class="sidebar-link">文件传输</a></li><li><a href="/blog/http/connect.html" class="sidebar-link">HTTP连接管理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/html/RepaintandReflow.html" class="sidebar-link">重绘和回流</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>NGINX</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/nginx/base.html" class="sidebar-link">NGINX</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/webpack/loader&amp;plugin.html" class="sidebar-link">loader 和 plugin</a></li><li><a href="/blog/webpack/proxyTable.html" class="sidebar-link">proxyTable 原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/docker/read.html" class="sidebar-link">Docker</a></li><li><a href="/blog/docker/container.html" class="sidebar-link">容器</a></li><li><a href="/blog/docker/image.html" class="sidebar-link">镜像</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="协议"><a href="#协议" class="header-anchor">#</a> 协议</h1> <h2 id="tcp-ip"><a href="#tcp-ip" class="header-anchor">#</a> TCP/IP</h2> <p>TCP/IP协议实际上是一系列网络通信协议的统称，其中TCP、IP是最核心的两个协议，其他的协议还有UDP、ICMP、ARP等，共同构成了一个复杂但是分工明确的协议栈。<br>
这个协议<a href="'./layer.html'">有四层</a>，应用层（HTTP）、传输层（TCP/UDP）、网络层（IP）、链路层（MAC）。</p> <h3 id="协议相关"><a href="#协议相关" class="header-anchor">#</a> 协议相关</h3> <ol><li>IP（Internet Protocol）协议，主要是用来解决寻址和路由的问题，以及如何在两点之前如何传输数据包。IP协议使用<strong>IP地址</strong>来定位互联网中的每一台设备。</li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>现在使用的IP协议版本大多数是IPv4，例如&quot;192.168.0.1&quot;，总共有2^32个，大约42亿个地址，现在又出现了IPv6，总共有2^128个地址。</p></div> <ol start="2"><li>TCP（Transmission Control Protocol），传输控制协议。位于IP协议之上，基于IP协议提供<strong>可靠、字节流</strong>形式的通信，是HTTP协议得以实现的基础。TCP协议两端可以如同操作文件一样访问传输的数据，就像在读取密闭管道里的流动字节。</li></ol> <ul><li>可靠是保证数据不丢失。</li> <li>字节流是保证数据的完整性。</li></ul> <ol start="3"><li>HTTP协议是传输协议，不关心寻址、路由、数据完整性等传输细节，这些工作都是交给网络中的TCP/IP来处理。</li></ol> <h2 id="dns"><a href="#dns" class="header-anchor">#</a> DNS</h2> <p>在TCP/IP协议中，使用IP地址来标识设备，数字形式的地址对于计算机来说非常方便，但是对于人而言就不是那么方便。<br>
DNS（Domain Name System）系统就是为了解决这个问题。用有意义的名字来代替IP地址。在DNS中，<strong>域名</strong>（Domain Name）又称为<strong>主机名</strong>（Host）。<br>
域名使用&quot;.&quot;分割成多个单词，级别从左到右逐渐升高，最右边称为顶级域名，比如<em>com</em>，<em>cn</em>，<em>deu</em>，<em>gov</em>等。</p> <p>想要通过域名访问网站，必须要将域名转换到对应的IP地址，这就是域名解析。</p> <h2 id="uri-url"><a href="#uri-url" class="header-anchor">#</a> URI/URL</h2> <p>通过域名和IP地址，只是能够确保我们能够找到服务器，但是服务器上还有很多资源，服务器不知道接收到的请求具体想访问那一个资源。</p> <p>URI（Uniform Resource Identity），统一资源标识符，就是用来标记互联网上的资源。</p> <p>URL（Uniform Resource Location），统一资源定位符，是URI的常用表现形式。URL通常由三部分组成，协议名称、主机名、路径。</p> <ul><li>协议名，访问当前资源使用的协议，比如<em>HTTP</em>，<em>HTTPS</em>。</li> <li>主机名，可以是域名或者IP地址。</li> <li>路径，资源在主机上的位置。</li></ul> <h2 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h2> <p>运行在 <a href="'./SSL&amp;TLS.html'">SSL/TLS</a> 上的HTTP。SSL/TLS，负责<code>加密通信的安全协议</code>。</p> <p>SSL（Secure Socket Layer），网景公司发明，发展到3.0时被标准化，改名为TLS（Transport Layer Security）。</p> <h2 id="代理"><a href="#代理" class="header-anchor">#</a> 代理</h2> <p>代理是HTTP协议中，请求/应答中的一个环节，作为中转站。可以转发客户端的请求，也可以转发服务端的响应（既是web服务器，又是web客户端）。代理服务器需要用Via标明代理的身份。</p> <p>&quot;Via: proxy1,proxy2&quot;，表示请求/响应，先经过了proxy1的代理，然后经过proxy2的代理，到了接收方。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>via: http/1.1 xxx.com, http/1.1 yyy.com
<span class="token comment"># 协议/版本号 节点名 节点注释（可选）</span>
<span class="token comment"># HTTP协议的时候可以省略，其他（HTTPS、FTP等）不能省略</span>
</code></pre></div><p>通过TRACE请求，可以跟踪代理链传输的请求报文。
Max-Forward，设置最多的转发次数，为0时，接收者会直接返回TRACE报文。</p> <h3 id="_1、常见代理"><a href="#_1、常见代理" class="header-anchor">#</a> 1、常见代理</h3> <ul><li>匿名代理，完全隐匿被代理的服务器，外界看到的只是代理服务器。</li> <li>透明代理，传输过程中透明开放，外界知道代理，也知道客户端。</li> <li>正向代理，靠近客户端，代表客户端向服务器发起请求（VPN）</li> <li>反向代理，靠近服务器，代表服务器想客户端发起请求（NGINX配置跨域）</li></ul> <h3 id="_2、代理作用"><a href="#_2、代理作用" class="header-anchor">#</a> 2、代理作用</h3> <ul><li>负载均衡，把访问均匀的分散到多台机器，实现访问集群化。</li> <li>内容缓存，CDN相关</li> <li>安全防护，隐藏IP，使用WAF（？）等地域网络攻击，以及过载</li> <li>数据处理，拦截数据，进行压缩、加密，或是按照一定策略修改请求和响应。</li> <li>健康检查，某个后端服务器出现问题的时候，及时踢出集群。</li> <li>过滤网站，限制内网请求等。</li> <li>转码器，修改响应数据柱体等。GIF --&gt; JPG，文本压缩。</li></ul> <h3 id="_3、如何设置代理"><a href="#_3、如何设置代理" class="header-anchor">#</a> 3、如何设置代理</h3> <ul><li>修改客户端，浏览器设置代理。</li> <li>修改网络，路由器或其他中间设备进行代理。</li> <li>修改DNS，手动配置host。</li> <li>修改服务器，重定向。</li></ul> <h2 id="网关（？）"><a href="#网关（？）" class="header-anchor">#</a> 网关（？）</h2> <p>代理连接的是两个或多个使用相同协议的应用程序。网关连接的则是两个或多个<code>使用不同协议的端点</code>，网关扮演了协议转换的角色。又称协议转换器。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/http/attack.html" class="prev">
        XSS 和 CSRF
      </a></span> <span class="next"><a href="/blog/http/layer.html">
        分层
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.46f8a346.js" defer></script><script src="/assets/js/2.0165f38a.js" defer></script><script src="/assets/js/42.546235c5.js" defer></script>
  </body>
</html>
