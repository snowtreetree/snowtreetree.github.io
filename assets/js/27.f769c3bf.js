(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{374:function(t,r,e){"use strict";e.r(r);var a=e(42),s=Object(a.a)({},(function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"cors-跨域资源共享"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cors-跨域资源共享"}},[t._v("#")]),t._v(" CORS - 跨域资源共享")]),t._v(" "),e("p",[t._v("Cross-Origin Resource Shareing")]),t._v(" "),e("p",[t._v("是一个系统，由一系列的HTTP头组成，浏览器根据这些HTTP头信息决定是否阻止JS跨域请求的响应。")]),t._v(" "),e("h2",{attrs:{id:"常见cors相关http头信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常见cors相关http头信息"}},[t._v("#")]),t._v(" 常见CORS相关HTTP头信息")]),t._v(" "),e("ul",[e("li",[t._v("Access-Control-Allow-Origin，请求资源共享给哪些域名，常见为*，或者根据请求域名设置。")]),t._v(" "),e("li",[t._v("Access-Control-Allow-Credentials")]),t._v(" "),e("li",[t._v("Access-Control-Allow-Methods，常见HEADS，GET，POST")]),t._v(" "),e("li",[t._v("Access-Control-Request-Method")]),t._v(" "),e("li",[t._v("Origin")])]),t._v(" "),e("h2",{attrs:{id:"跨域"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#跨域"}},[t._v("#")]),t._v(" 跨域")]),t._v(" "),e("p",[t._v("当A应用访问"),e("code",[t._v("不同域名")]),t._v("，"),e("code",[t._v("不同协议")]),t._v("，"),e("code",[t._v("不同端口")]),t._v("的资源时，资源就会发起一个跨域请求。XMLHttpRequest和Fetch API需要遵循同源策略，在使用这两个API的时候，需要访问同源下的资源，或者响应头内配置了合适的响应头信息。")]),t._v(" "),e("p",[t._v("::: tips")]),t._v(" "),e("p",[t._v("同源策略限制了以下行为：")]),t._v(" "),e("ul",[e("li",[t._v("Cookie、LocalStorage、IndexDB的获取")]),t._v(" "),e("li",[t._v("AJAX和fetch请求不能发送，需配置响应头信息\n:::")])]),t._v(" "),e("h2",{attrs:{id:"跨域解决方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#跨域解决方案"}},[t._v("#")]),t._v(" 跨域解决方案")]),t._v(" "),e("h3",{attrs:{id:"nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" NGINX")]),t._v(" "),e("p",[t._v("常见的解决方案，配置转发。")]),t._v(" "),e("h3",{attrs:{id:"jsonp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jsonp"}},[t._v("#")]),t._v(" JSONP")]),t._v(" "),e("p",[e("code",[t._v("json with padding(填充)")])]),t._v(" "),e("p",[t._v("js、css、图片资源的请求不会出现跨域限制的问题，就可以通过创建一个script标签，url地址为对应的请求地址。因此只支持get请求。")]),t._v(" "),e("h3",{attrs:{id:"cors"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cors"}},[t._v("#")]),t._v(" CORS")]),t._v(" "),e("p",[t._v("服务端配置响应头信息")]),t._v(" "),e("h3",{attrs:{id:"node中间层"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#node中间层"}},[t._v("#")]),t._v(" node中间层")]),t._v(" "),e("h2",{attrs:{id:"不同域名信息共享"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#不同域名信息共享"}},[t._v("#")]),t._v(" 不同域名信息共享")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("postMessage(data,origin)")])]),t._v(" "),e("li",[e("p",[t._v("document.domain，子域名的domain设置为主域名下")])]),t._v(" "),e("li")]),t._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Glossary/CORS",target:"_blank",rel:"noopener noreferrer"}},[t._v("CORS - MDN"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://segmentfault.com/a/1190000009773724",target:"_blank",rel:"noopener noreferrer"}},[t._v("jsonp 跨域原理分析"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://segmentfault.com/a/1190000011145364",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端常见跨域解决方案（全）"),e("OutboundLink")],1)])])}),[],!1,null,null,null);r.default=s.exports}}]);