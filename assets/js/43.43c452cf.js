(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{389:function(_,v,t){"use strict";t.r(v);var a=t(42),r=Object(a.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#协议"}},[_._v("#")]),_._v(" 协议")]),_._v(" "),t("h2",{attrs:{id:"tcp-ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp-ip"}},[_._v("#")]),_._v(" TCP/IP")]),_._v(" "),t("p",[_._v("TCP/IP 协议实际上是一系列网络通信协议的统称，其中 TCP、IP 是最核心的两个协议，其他的协议还有 UDP、ICMP、ARP 等，共同构成了一个复杂但是分工明确的协议栈。"),t("br"),_._v("\n这个协议"),t("a",{attrs:{href:"'./layer.html'"}},[_._v("有四层")]),_._v("，应用层（HTTP）、传输层（TCP/UDP）、网络层（IP）、链路层（MAC）。")]),_._v(" "),t("h3",{attrs:{id:"协议相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#协议相关"}},[_._v("#")]),_._v(" 协议相关")]),_._v(" "),t("ol",[t("li",[_._v("IP（Internet Protocol）协议，主要是用来解决寻址和路由的问题，以及如何在两点之间如何传输数据包。")])]),_._v(" "),t("p",[_._v("IP 协议使用"),t("strong",[_._v("IP 地址")]),_._v("来定位互联网中的每一台设备。")]),_._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[_._v("TIP")]),_._v(" "),t("p",[_._v('现在使用的 IP 协议版本大多数是 IPv4，例如"192.168.0.1"，总共有 2^32 个，大约 42 亿个地址，现在又出现了 IPv6，总共有 2^128 个地址。')])]),_._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[_._v("TCP（Transmission Control Protocol），传输控制协议。位于 IP 协议之上，基于 IP 协议提供"),t("strong",[_._v("可靠、字节流")]),_._v("形式的通信，是 HTTP 协议得以实现的基础。TCP 协议两端可以如同操作文件一样访问传输的数据，就像在读取密闭管道里的流动字节。")])]),_._v(" "),t("ul",[t("li",[_._v("可靠是保证数据不丢失。")]),_._v(" "),t("li",[_._v("字节流是保证数据的完整性。")])]),_._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[_._v("HTTP 协议是传输协议，不关心寻址、路由、数据完整性等传输细节，这些工作都是交给网络中的 TCP/IP 来处理。")])]),_._v(" "),t("h2",{attrs:{id:"dns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns"}},[_._v("#")]),_._v(" DNS")]),_._v(" "),t("p",[_._v("在 TCP/IP 协议中，使用 IP 地址来标识设备，数字形式的地址对于计算机来说非常方便，但是对于人而言就不是那么方便。"),t("br"),_._v("\nDNS（Domain Name System）系统就是为了解决这个问题。用有意义的名字来代替 IP 地址。在 DNS 中，"),t("strong",[_._v("域名")]),_._v("（Domain Name）又称为"),t("strong",[_._v("主机名")]),_._v("（Host）。"),t("br"),_._v('\n域名使用"."分割成多个单词，级别从左到右逐渐升高，最右边称为顶级域名，比如'),t("em",[_._v("com")]),_._v("，"),t("em",[_._v("cn")]),_._v("，"),t("em",[_._v("deu")]),_._v("，"),t("em",[_._v("gov")]),_._v("等。")]),_._v(" "),t("p",[_._v("想要通过域名访问网站，必须要将域名转换到对应的 IP 地址，这就是域名解析。")]),_._v(" "),t("h2",{attrs:{id:"uri-url"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uri-url"}},[_._v("#")]),_._v(" URI/URL")]),_._v(" "),t("p",[_._v("通过域名和 IP 地址，只是能够确保我们能够找到服务器，但是服务器上还有很多资源，服务器不知道接收到的请求具体想访问那一个资源。")]),_._v(" "),t("p",[_._v("URI（Uniform Resource Identity），统一资源标识符，就是用来标记互联网上的资源。")]),_._v(" "),t("p",[_._v("URL（Uniform Resource Location），统一资源定位符，是 URI 的常用表现形式。URL 通常由三部分组成，协议名称、主机名、路径。")]),_._v(" "),t("ul",[t("li",[_._v("协议名，访问当前资源使用的协议，比如"),t("em",[_._v("HTTP")]),_._v("，"),t("em",[_._v("HTTPS")]),_._v("。")]),_._v(" "),t("li",[_._v("主机名，可以是域名或者 IP 地址。")]),_._v(" "),t("li",[_._v("路径，资源在主机上的位置。")])]),_._v(" "),t("h2",{attrs:{id:"https"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[_._v("#")]),_._v(" HTTPS")]),_._v(" "),t("p",[_._v("运行在 "),t("a",{attrs:{href:"'./SSL&TLS.html'"}},[_._v("SSL/TLS")]),_._v(" 上的 HTTP。SSL/TLS，负责"),t("code",[_._v("加密通信的安全协议")]),_._v("。")]),_._v(" "),t("p",[_._v("SSL（Secure Socket Layer），网景公司发明，发展到 3.0 时被标准化，改名为 TLS（Transport Layer Security）。")]),_._v(" "),t("h2",{attrs:{id:"代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代理"}},[_._v("#")]),_._v(" 代理")]),_._v(" "),t("p",[_._v("代理是 HTTP 协议中，请求/应答中的一个环节，作为中转站。可以转发客户端的请求，也可以转发服务端的响应（既是 web 服务器，又是 web 客户端）。代理服务器需要用 Via 标明代理的身份。")]),_._v(" "),t("p",[_._v('"Via: proxy1,proxy2"，表示请求/响应，先经过了 proxy1 的代理，然后经过 proxy2 的代理，到了接收方。')]),_._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[_._v("via: http/1.1 xxx.com, http/1.1 yyy.com\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[_._v("# 协议/版本号 节点名 节点注释（可选）")]),_._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[_._v("# HTTP协议的时候可以省略，其他（HTTPS、FTP等）不能省略")]),_._v("\n")])])]),t("p",[_._v("通过 TRACE 请求，可以跟踪代理链传输的请求报文。\nMax-Forward，设置最多的转发次数，为 0 时，接收者会直接返回 TRACE 报文。")]),_._v(" "),t("h3",{attrs:{id:"_1、常见代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、常见代理"}},[_._v("#")]),_._v(" 1、常见代理")]),_._v(" "),t("ul",[t("li",[_._v("匿名代理，完全隐匿被代理的服务器，外界看到的只是代理服务器。")]),_._v(" "),t("li",[_._v("透明代理，传输过程中透明开放，外界知道代理，也知道客户端。")]),_._v(" "),t("li",[_._v("正向代理，靠近客户端，代表客户端向服务器发起请求（VPN）")]),_._v(" "),t("li",[_._v("反向代理，靠近服务器，代表服务器想客户端发起请求（NGINX 配置跨域）")])]),_._v(" "),t("h3",{attrs:{id:"_2、代理作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、代理作用"}},[_._v("#")]),_._v(" 2、代理作用")]),_._v(" "),t("ul",[t("li",[_._v("负载均衡，把访问均匀的分散到多台机器，实现访问集群化。")]),_._v(" "),t("li",[_._v("内容缓存，CDN 相关")]),_._v(" "),t("li",[_._v("安全防护，隐藏 IP，使用 WAF（？）等地域网络攻击，以及过载")]),_._v(" "),t("li",[_._v("数据处理，拦截数据，进行压缩、加密，或是按照一定策略修改请求和响应。")]),_._v(" "),t("li",[_._v("健康检查，某个后端服务器出现问题的时候，及时踢出集群。")]),_._v(" "),t("li",[_._v("过滤网站，限制内网请求等。")]),_._v(" "),t("li",[_._v("转码器，修改响应数据柱体等。GIF --\x3e JPG，文本压缩。")])]),_._v(" "),t("h3",{attrs:{id:"_3、如何设置代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、如何设置代理"}},[_._v("#")]),_._v(" 3、如何设置代理")]),_._v(" "),t("ul",[t("li",[_._v("修改客户端，浏览器设置代理。")]),_._v(" "),t("li",[_._v("修改网络，路由器或其他中间设备进行代理。")]),_._v(" "),t("li",[_._v("修改 DNS，手动配置 host。")]),_._v(" "),t("li",[_._v("修改服务器，重定向。")])]),_._v(" "),t("h2",{attrs:{id:"网关（？）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#网关（？）"}},[_._v("#")]),_._v(" 网关（？）")]),_._v(" "),t("p",[t("code",[_._v("代理")]),_._v("连接的是两个或多个使用相同协议的应用程序。网关连接的则是两个或多个"),t("code",[_._v("使用不同协议的端点")]),_._v("，"),t("code",[_._v("网关")]),_._v("扮演了协议转换的角色。又称协议转换器。")]),_._v(" "),t("h2",{attrs:{id:"arp-address-resolution-protocol"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arp-address-resolution-protocol"}},[_._v("#")]),_._v(" ARP - Address Resolution Protocol")]),_._v(" "),t("p",[_._v("属于数据链路层，通过解析网络层地址来找寻数据链路层地址的网络传输协议（网络寻址？）。")]),_._v(" "),t("h3",{attrs:{id:"_1、工作流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、工作流程"}},[_._v("#")]),_._v(" 1、工作流程")]),_._v(" "),t("ul",[t("li",[_._v("检查 ARP 缓存")]),_._v(" "),t("li",[_._v("发送 ARP 请求")]),_._v(" "),t("li",[_._v("添加 ARP 表项，收到方添加")]),_._v(" "),t("li",[_._v("发送 ARP 应答")]),_._v(" "),t("li",[_._v("添加 ARP 表项，发送方添加")])])])}),[],!1,null,null,null);v.default=r.exports}}]);